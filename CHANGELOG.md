# Historial de Cambios

Todos los cambios importantes de AI Framework se documentan en este archivo.

El formato est√° basado en [Keep a Changelog](https://keepachangelog.com/es-ES/1.0.0/),
y este proyecto adhiere a [Versionado Sem√°ntico](https://semver.org/lang/es/).

---

## [No Publicado]

### Cambiado

- Comando `/release` optimizado y corregido (commit actual)
  - Reducci√≥n: 333 ‚Üí 153 l√≠neas (54% menos)
  - Eliminadas secciones meta innecesarias (Notas de Implementaci√≥n, Seguridad, Rollback)
  - Validaci√≥n corregida: permite CHANGELOG.md modificado (integraci√≥n con /changelog)
  - Confirmaci√≥n real con WAIT expl√≠cito
  - Orden corregido: CHANGELOG antes de npm version
- Comando `/changelog` optimizado (commit actual)
  - Reducci√≥n: 166 ‚Üí 145 l√≠neas (13% menos)
  - Eliminadas secciones "Principios de Dise√±o" y "Notas" verbosas
  - Solo 3 reglas esenciales

---

## [1.4.1] - 2025-10-23

### A√±adido

- Soporte para tipo expl√≠cito con Task ID en comando `/commit` (PR #21)
  - Formato: `refactor: TRV-345 descripci√≥n` (tipo sobrescribe auto-mapping)
  - Prioridad: tipo expl√≠cito > auto-mapping desde archivos
  - Pattern detection autom√°tico: `type: TASK-ID description`

### Cambiado

- T√≠tulo personalizable en PRs con formato corporativo (PR #21)
  - Pregunta interactiva cuando detecta commits corporativos
  - Opciones: usar primer commit o ingresar t√≠tulo custom
  - Validaci√≥n de formato corporativo con fallback
- Documentaci√≥n de comandos optimizada con formato consistente (commit 504f831)
  - Patr√≥n "Casos de Uso" + "¬øQu√© hace?" aplicado
  - Reducci√≥n de verbosidad: 30% promedio
  - 8 comandos optimizados (commit, pullrequest, cleanup, specify, clarify, plan, tasks, implement)
- Comando `/release` optimizado y corregido (commit ababbca)
  - Reducci√≥n: 333 ‚Üí 153 l√≠neas (54% menos)
  - Eliminadas secciones meta innecesarias (Notas de Implementaci√≥n, Seguridad, Rollback)
  - Validaci√≥n corregida: permite CHANGELOG.md modificado (integraci√≥n con /changelog)
  - Confirmaci√≥n real con WAIT expl√≠cito
  - Orden corregido: CHANGELOG antes de npm version
- Comando `/changelog` optimizado (commit ababbca)
  - Reducci√≥n: 166 ‚Üí 145 l√≠neas (13% menos)
  - Eliminadas secciones "Principios de Dise√±o" y "Notas" verbosas
  - Solo 3 reglas esenciales

### Arreglado

- Detecci√≥n de n√∫meros de branch duplicados en entornos de equipo (PR #21)
  - Verificaci√≥n de 3 fuentes: remote branches + local branches + specs directories
  - Previene conflictos cuando m√∫ltiples developers crean features simult√°neamente
  - Pattern matching exacto para evitar falsos positivos
- Limpieza de git config estandarizada en `pullrequest.md` (PR #21)
  - Cambio de `--unset-all` a `--remove-section` (4 ubicaciones)
  - Fix consistente en todas las secciones de rollback

---

## [1.4.0] - 2025-10-22

### A√±adido

- Comando `/update-docs` para actualizaci√≥n automatizada de documentaci√≥n project-agnostic (PR #20)
- Formato corporativo de commits en comando `/commit` con detecci√≥n autom√°tica de Task ID (PR #19)
  - Template: `Tipo|IdTarea|YYYYMMDD|Descripci√≥n`
  - Detecci√≥n autom√°tica de patrones (TRV-345, PROJ-123, etc.)
  - Fallback a conventional commits si no hay Task ID

### Documentaci√≥n

- Sincronizaci√≥n de referencias al comando `pullrequest` en handbook (PR #20)
- Gu√≠a de comandos actualizada con cambios recientes en workflow git (PR #20)
- Ejemplos de help con placeholders de fecha en lugar de valores hardcodeados (PR #20)
- Justificaci√≥n de timeout documentada en commands-guide.md (PR #20)
- Refinamiento de mensajer√≠a arquitect√≥nica y flujo de instalaci√≥n en README (PR #19)

### Cambiado

- ‚ö†Ô∏è **BREAKING**: Comando `pr.md` renombrado a `pullrequest.md` (PR #20)
- ‚ö†Ô∏è **BREAKING**: Eliminado `docs.md`, reemplazado por `update-docs` portable (PR #20)
- Comando `changelog` optimizado con compatibilidad bash 3.2 (POSIX test, grep -E) (PR #20)
- Comando `update-docs` completamente project-agnostic (sin hardcoded paths) (PR #20)
- Workflow de review en CI migrado a GitHub CLI (PR #19)
- Interfaz de handbook simplificada removiendo efectos sobre-dise√±ados (PR #19)

### Arreglado

- Regex portable compatible con BSD grep en `pullrequest.md` (macOS) (PR #20)
- L√≠mite de caracteres de branch corregido (30‚Üí39 chars) en `pullrequest.md` (PR #20)
- Validaci√≥n de stats vac√≠os en git diff (PR #20)
- Extracci√≥n de body completo de PR en comando changelog (antes solo t√≠tulo) (PR #19)
- Sincronizaci√≥n de regla `/prps/` entre template y hook session-start (PR #19)
- Sincronizaci√≥n de `plugin.json` en proceso de versioning (PR #19)

---

## [1.3.1] - 2025-10-20

### A√±adido

- Generaci√≥n de documentaci√≥n SDD en espa√±ol (spec.md, plan.md, tasks.md, checklist.md) (PR #17, #18)
- Sincronizaci√≥n autom√°tica de develop al hacer push a main v√≠a workflow CI (PR #18)
- Logging estructurado en hook clean_code.py (PR #18)

### Arreglado

- **CR√çTICO**: Regresi√≥n en validaci√≥n de --short-name en create-new-feature.sh (permite valor faltante) (PR #18)
- Adopci√≥n de convenci√≥n de sufijo .template en hook session-start (PR #18)
- Condici√≥n de carrera en .mcp.json en hook session-start (PR #18)

### Cambiado

- Directorio PRPs reubicado a ra√≠z del repositorio (mejora organizacional) (PR #18)
- Comando changelog: eliminada l√≥gica bash, usa instrucciones declarativas (PR #18)
- Comando release: eliminada l√≥gica bash, usa instrucciones declarativas (PR #18)
- Comandos refactorizados siguiendo patr√≥n de estructura de pr.md (PR #18)

---

## [1.3.0] - 2025-10-18

### A√±adido

- Path resolution robusto en todos los hooks con m√∫ltiples estrategias de fallback
- Graceful degradation en hooks de logging (contin√∫an funcionando sin project root)

### Cambiado

#### üèóÔ∏è Arquitectura y Estructura (PR #16)

- **BREAKING**: Plugin restructurado seg√∫n especificaci√≥n oficial de Claude Code
  - `commands/` y `agents/` movidos a plugin root (69 archivos)
  - `.claude-plugin/` solo contiene metadata (plugin.json, marketplace.json)
  - Elimina jerarqu√≠a falsa, simplifica descubrimiento de comandos
- Hook architecture: todos los hooks usan path resolution confiable con `__file__` (no `os.getcwd()`)
- Hook fallbacks: logging a stderr cuando project root no disponible (graceful degradation)
- `.mcp.json` removido de gitignore de usuario (evita commits inadecuados de framework)
- Directorio `.claude.template` deprecado y removido

#### üìñ Documentaci√≥n Comprimida (PR #16)

- **architecture.md**: 480 ‚Üí 209 l√≠neas (-56.5%)
  - Elimina redundancias con CLAUDE.md
  - Constitution retiene autoridad estrat√©gica; CLAUDE.md retiene detalles t√°cticos
  - Sincronizaci√≥n de impacto documentada en header
- **constitution.md**: comprimido para eficiencia de tokens (v2.2.0 ‚Üí v2.3.0)
  - Art√≠culos fundamentales preservados
  - Detalles t√°cticos movidos a CLAUDE.md
  - Elimina ~180 tokens de redundancia
- **project-init**: optimizado para eficiencia de tokens sin perder contexto cr√≠tico
- **operational-excellence.md**: renamed from governance guide (mayor claridad)

#### üéØ Comandos Optimizados (PR #16)

- **pr.md**: 455 ‚Üí 183 l√≠neas (-60%)
  - Dual review implementado (code quality + security review pre-launch)
  - Audit fixes y mejoras en validaciones
  - Separaci√≥n clara de responsabilidades
  - `/changelog` y `/release` ahora son comandos separados (antes unificados)
- Gu√≠a de agentes efectivos (context engineering) integrada y referenciada
- Hojas de ruta documentadas para cada comando cr√≠tico

#### üîê Mejoras de Seguridad (PR #16)

- **security_guard hook**: feedback claro y accionable para violaciones
- **pre-tool-use hook**: redise√±o para transparencia (eliminadas black boxes)
- **clean_code hook**: transformado de black box a formato transparente y auditable

#### üöÄ Caracter√≠sticas Nuevas (PR #16)

- **Execution Principles** a√±adidos a CLAUDE.md (objectivity, minimalism, communication, planning, implementation, validation)
- **security_guard improvements**: validaciones m√°s granulares con mensajes de error espec√≠ficos
- Separation de `/changelog` y `/release` como comandos independientes
  - `/changelog`: auto-detecta PRs, actualiza CHANGELOG, commitea
  - `/release`: bump versi√≥n, crea tag, crea release GitHub

### Arreglado

- **CR√çTICO**: Path resolution en 5 hooks (session-start, security_guard, ccnotify, minimal_thinking, pre-tool-use)
  - ‚ùå Bug: `os.getcwd()` no confiable cuando Claude Code ejecuta desde diferentes directorios
  - ‚ùå Bug: Logs/databases iban a ubicaciones incorrectas en proyectos anidados
  - ‚úÖ Fix: `find_plugin_root()` usando `__file__` (100% confiable)
  - ‚úÖ Fix: `find_project_root()` con b√∫squeda upward robusta + fallbacks
- Bug en loop de b√∫squeda upward en ccnotify.py y minimal_thinking.py
- session-start.py: fallback a `find_plugin_root()` si CLAUDE_PLUGIN_ROOT no existe
- security_guard.py: graceful degradation (no exceptions, logging a stderr)
- Pre-tool-use hook: arquitectura correcta (tool_input modification, no stdout context injection)

---

## [1.1.2] - 2025-10-17

### A√±adido

- Workflow de GitHub Pages se dispara autom√°ticamente con cambios en CHANGELOG.md

### Cambiado

- Plugin structure: hooks/ y template/ movidos a plugin root per especificaci√≥n oficial (PR #15)
- Plugin configuration: eliminada redundancia en marketplace.json, versi√≥n sincronizada (PR #15)
- Command workflow: pr.md crea branch temporal ANTES de pre-review (permite correcciones) (PR #14, #15)
- Template naming: archivos framework usan sufijo .template para instalaci√≥n (PR #14)

### Arreglado

- Security: command injection risk en pr.md (sanitizaci√≥n de pr_title, --body-file) (PR #15)
- Reliability: persistencia de variables en pr.md usando git config (PR #15)
- Configuration: hooks.json sin matchers innecesarios, sin timeouts redundantes (PR #15)
- Gitignore: rutas actualizadas /hooks/ (PR #15)
- Complexity: simplificaci√≥n de commands pr.md, changelog.md, cleanup.md, commit.md (PR #14)
- Documentation: errors de parser Vue en VitePress (PR #13)
- Plugin: unificaci√≥n agents/commands a patr√≥n template-based (PR #12)
- Documentation: eliminaci√≥n de agent-assignment obligatorio (PR #10, #11)
- Documentation: mejoras de calidad y gesti√≥n de versiones (PR #9)

---

## [1.1.1] - 2025-10-16

### A√±adido

- Gesti√≥n autom√°tica de versiones con `npm version` (sincroniza package.json, docs, README)
- Componente de comparaci√≥n de versiones en documentaci√≥n
- Comandos opcionales: `/analyze`, `/checklist`, `/sync` con gu√≠a de uso
- `agent-strategy-advisor` para recomendaciones de agentes

### Cambiado

- ‚ö†Ô∏è Breaking: Sincronizaci√≥n autom√°tica de agents/commands desde templates (respaldar personalizaciones antes de actualizar)
- Workflow SDD simplificado: 7 ‚Üí 6 pasos (eliminado agent-assignment obligatorio)
- Checklist reposicionado a PRE-implementaci√≥n (valida specs, no c√≥digo)

### Eliminado

- Badge de release duplicado en homepage
- Emojis decorativos en docs (conservados solo funcionales)
- 63 l√≠neas de documentaci√≥n obsoleta sobre "Agent Assignment"
- Referencias a `agent-assignment-analyzer` (ahora `agent-strategy-advisor`)

### Arreglado

- Errores de parsing Vue en VitePress (sintaxis de placeholders)
- Comportamiento documentado de `speckit.specify` (crea branch, no worktree)
- Precisi√≥n en documentaci√≥n del workflow (numeraci√≥n, conteos, terminolog√≠a)
- C√°lculo de complejidad constitucional (clasificaci√≥n L-size correcta)

---

## [1.1.0] - 2025-10-15

### A√±adido

- Sistema de dise√±o monocrom√°tico premium (est√©tica brutalista inspirada en Apple)
- Animaciones premium en botones (escala + shine con easing Apple)
- √çconos Lucide: terminal.svg, zap.svg
- Grid de features balanceado (2x2, 4 tarjetas)

### Cambiado

- Color de marca: azul GitHub ‚Üí monocrom√°tico (#18181b)
- Tipograf√≠a mejorada (font-weight 800, letter-spacing -0.5px)
- Homepage reorganizada (enfoque en propuesta de valor)

### Seguridad

- Revisi√≥n de seguridad aprobada (score 0.95)
- Activos SVG verificados como seguros

---

## [1.0.0] - 2025-10-15

### A√±adido

- Documentaci√≥n Human Handbook en GitHub Pages
- 6 gu√≠as completas: Quickstart, AI-First Workflow, Commands, Agents, Pro Tips, MCP
- Matriz de decisi√≥n Branch vs Worktree
- Diagramas de workflow (Mermaid)
- 7 lifecycle hooks (Python)
- 24 slash commands en 4 categor√≠as
- 45 agentes especializados en 11 categor√≠as
- Framework de gobernanza constitucional (5 principios no negociables)
- Workflow Specification-Driven Development (SDD)

### Cambiado

- Sintaxis de comandos usa namespace completo del plugin
- Terminolog√≠a: PRD-cycle ‚Üí PRP-cycle
- Workflow SDD-Cycle documentado (9 pasos completos)

### Arreglado

- Comportamiento de `speckit.specify` (crea branch, no worktree)
- Sintaxis de comandos (191 referencias corregidas)
- Conteo de agentes (45, no 44)

### Seguridad

- Hook `security_guard.py` bloquea 5 patrones cr√≠ticos
- Revisi√≥n de seguridad BLOQUEANTE en workflow de PR
