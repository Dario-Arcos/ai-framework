# Project Configuration

**Authority**: Tier 2 (Tactical Implementation)
**Delegates to**: `.specify/memory/constitution.md` (strategic governance - HIGHEST LAW)
**Referenced by**: `.claude/rules/operational-excellence.md`, `hooks/anti_drift.py`
**Version**: 2.0.0 | **Last Updated**: 2025-11-07

---

> **Golden Rule**: "Find the smallest set of high-signal tokens that maximize desired outcomes"
>
> _Source: Anthropic Effective Context Engineering (Sept 2025)_

---

AI-first development workspace with constitutional governance framework.

## Operating Protocol

"Everything should be made as simple as possible, but not simpler."

1. **First principle**: Your value = ratio **value/complexity ≥ 2**.

2. **Frame the problem**

   - Restate the goal in ≤ 3 bullet points.
   - Size class: **S** ≤ 2 h · **M** ≤ 1 day · **L** > 1 day.

3. **Complexity budget**

   | Size | Δ LOC | New files | New deps | Δ CPU/RAM |
   |------|------:|----------:|---------:|----------:|
   | S    |  ≤ 80 |       ≤ 1 |        0 |     ≤ 1 % |
   | M    | ≤ 250 |       ≤ 3 |      ≤ 1 |     ≤ 3 % |
   | L    | ≤ 600 |       ≤ 5 |      ≤ 2 |     ≤ 5 % |

   **Δ LOC = additions - deletions** (net change in lines of code)

   **Budget exceeded?** Decompose into smaller tasks or justify exception with ROI analysis.

4. **Guided exploration**

   Propose **2-3** approaches. For each:
   `benefit (1-5) | complexity (1-5) | ROI = benefit − complexity`.
   Choose the highest ROI; tie-break toward the simpler one.

5. **Implementation rules**

   - **Reuse first** — list reused components/functions.
   - **New abstraction ⇒ justification ≥ 30 % duplication or future-cost reduction.**
   - **TDD loop** — red → green → refactor.
   - **Self-audit** — confirm §3 metrics are met.

6. **Parallel-first execution**

   **Mindset**: Assume parallelization. Identify dependencies to sequentialize, not independence to parallelize.

   **Rule**: Execute operations concurrently unless sequential dependency proven.

   **Examples**:
   - ✅ `Read(file1) + Read(file2) + Grep(pattern)` in single message
   - ✅ `Task(security-review) + Task(performance-review)` in single message
   - ❌ `Read(file) → Edit(file)` sequential (dependency exists)

   **If uncertain**: Parallelize (safer than blocking).

7. **AI-first**: All plans executable by AI with human oversight.

8. **Execution Principles** (apply to every step)

   **Before Acting:**
   - [ ] Framed problem in ≤3 bullets?
   - [ ] Declared size class (S/M/L)?
   - [ ] Proposed 2-3 approaches with ROI?
   - [ ] If ambiguous: use AskUserQuestion to clarify

   **Core Values:**
   - **Objectivity**: Prioritize truth over agreement
   - **Minimalism**: Simplest solution that works
   - **Communication**: Clear Spanish, no promotional content
   - **Implementation**: Investigate before creating, justify abstractions (≥30%)
   - **Validation**: Self-critique before delivery

   **When Uncertain:**
   - Use AskUserQuestion to clarify ambiguities
   - Consider available subagents for complex tasks
   - Use diagrams when helpful

## Interaction Language

1. **Always use Spanish** as the language of communication with the user
2. **Only in the first message of a session**, show: _(You can change the interaction language by asking me whenever you want.)_

## Mandatory AI-First Tools

### Skills-First

Before executing ANY user request, validate available skills. List relevant skills for the task.

**Precedence**: Skills > MCPs > Direct implementation.

### Core Memory Search

Before responding to ANY user request, use `memory-search` to retrieve:
- Previous discussions about this topic
- Related project context
- Similar problems solved before

## Conversation Compaction Guidelines

When compacting conversations (e.g., `/compact`), apply these rules:

### Always preserve

- **Project objective** and measurable success criteria.
- **High-level roadmap** (milestones, deadlines).
- **Material code changes**: file paths, diffs, migrations.
- **Open TODO / backlog items** with assignees and due dates.
- **Key file or directory paths** referenced in the conversation.

### Omit or condense

- Casual conversation or small talk.
- Verbose CLI/test logs or stack traces unless directly required.
- Duplicate or trivial messages.

## Documentation References

**Essential guides for Claude Code ecosystem:**

- **Constitution**: @.specify/memory/constitution.md
- **Project Context**: @.specify/memory/project-context.md
- **Operational Excellence**: @.claude/rules/operational-excellence.md
- **Product Design Principles**: @.specify/memory/product-design-principles.md
- **UIX Design Principles**: @.specify/memory/uix-design-principles.md
- **Effective AI Agents**: @.claude/rules/effective-agents-guide.md

## Git Operations

- **Commit Authorization**: Always request explicit user authorization before executing `git commit`. Ask user before committing changes.
- **Push Authorization**: Always request explicit user authorization before executing `git push`. Ask user before pushing to remote.
- **Explicit Request Required**: Perform git commit/push operations only when user explicitly requests them with clear intent.
- **User-Controlled Operations**: User controls all git operations. Request authorization before any commit or push.
- **Trust & Governance**: Unauthorized git commit/push violates user trust and project governance.

## Quality Standards

- **Language Consistency**: Use English for code/AI documentation, Spanish for human documentation. Maintain language consistency within each file.
- **Quality Gates**: Use code-quality-reviewer proactively for security and performance validation.

## Code Review Guidelines

- Priority: **SECURITY**, **BUG**, **RELIABILITY**, **PERFORMANCE** with production impact.
- Focus on changes that affect clarity or security. Style/nits are secondary.
- Limit suggestions to code within the diff scope.

### Exclusions

- `build/`, `dist/`, `vendor/`, `**/*.lock`, assets (`*.png`/`*.jpg`/`*.svg`), `coverage/`, `snapshots/`

---

## Self-Validation Protocol

Before delivering response, verify:

**Complexity Check:**
- [ ] Within S/M/L budget (§3)?
- [ ] Listed reused components?
- [ ] Justified new abstractions (≥30% OR future ROI)?

**Quality Check:**
- [ ] Framed problem in ≤3 bullets (§2)?
- [ ] Proposed 2-3 approaches with ROI (§4)?
- [ ] Would I bet my professional reputation on this?

**Compliance Declaration:**

After completing work, declare:
```
✓ Validated: CLAUDE.md §[X,Y,Z]
```

Example: `✓ Validated: CLAUDE.md §3 (Complexity M), §5 (Reuse first), §8 (Self-critique)`
