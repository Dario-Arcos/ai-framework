#!/bin/bash
# Ralph Loop Configuration
# Generated by: ./install.sh
# Modify as needed for your project

# ─────────────────────────────────────────────────────────────────
# QUALITY LEVEL
# ─────────────────────────────────────────────────────────────────
# prototype: Skip tests, fast iteration, commit freely
# production: TDD mandatory, all gates must pass (DEFAULT)
# library: Full coverage + docs + edge cases + examples

QUALITY_LEVEL="production"

# ─────────────────────────────────────────────────────────────────
# BACKPRESSURE GATES
# ─────────────────────────────────────────────────────────────────
# Commands that must pass before commit
# Empty string = skip that gate
# Modify these for your project's tooling

GATE_TEST="npm test"
GATE_TYPECHECK="npm run typecheck"
GATE_LINT="npm run lint"
GATE_BUILD="npm run build"

# Examples for different stacks:
#
# Python:
#   GATE_TEST="pytest"
#   GATE_TYPECHECK="mypy src/"
#   GATE_LINT="ruff check ."
#   GATE_BUILD=""
#
# Go:
#   GATE_TEST="go test ./..."
#   GATE_TYPECHECK=""  # Go is compiled
#   GATE_LINT="golangci-lint run"
#   GATE_BUILD="go build ./..."
#
# Rust:
#   GATE_TEST="cargo test"
#   GATE_TYPECHECK=""  # Rust is compiled
#   GATE_LINT="cargo clippy"
#   GATE_BUILD="cargo build"

# ─────────────────────────────────────────────────────────────────
# CONTEXT LIMITS
# ─────────────────────────────────────────────────────────────────
# Claude Opus context window settings

CONTEXT_LIMIT=200000          # Total context window (Opus: 200K)
CONTEXT_WARNING=60            # Yellow zone threshold (%)
CONTEXT_CRITICAL=80           # Exit threshold (%)

# ─────────────────────────────────────────────────────────────────
# CONFESSION SETTINGS
# ─────────────────────────────────────────────────────────────────
# Confidence threshold for task completion

CONFESSION_MIN_CONFIDENCE=80  # 0-100, tasks below this are NOT complete

# ─────────────────────────────────────────────────────────────────
# DISCOVERY MODE
# ─────────────────────────────────────────────────────────────────
# Enable brainstorming phase before planning

ENABLE_DISCOVERY=false        # Set to true to require discovery first

# ─────────────────────────────────────────────────────────────────
# SAFETY SETTINGS
# ─────────────────────────────────────────────────────────────────
# Circuit breaker and safety limits

MAX_CONSECUTIVE_FAILURES=3    # Exit after N consecutive failures
MAX_TASK_ATTEMPTS=3           # Exit if same task fails N times
TASK_HISTORY_SIZE=6           # Size of task history for thrashing detection

# ─────────────────────────────────────────────────────────────────
# RUNTIME LIMITS
# ─────────────────────────────────────────────────────────────────
# Optional time limits (0 = unlimited)

MAX_RUNTIME=0                 # Max seconds per loop session (0 = unlimited)
# MAX_RUNTIME=3600            # Example: 1 hour limit
