# Rule File Templates

Each file targets ~25-40 lines. Total budget: <2000 tokens across all 4 files.

**Subtraction test**: Before including any field, ask: "Without this, would Claude make a wrong decision?" If no → omit.

## project.md (~25 lines)

```markdown
# Project

## Purpose
[1-2 sentences extracted from manifest description or README first paragraph]

## Paradigms
[Design philosophies detected from code patterns — only include those with clear evidence]
- [paradigm]: [how it manifests — e.g., "domain logic in src/domain/, never in controllers"]

## Domain
[CONDITIONAL — omit if no clear domain concepts detected]
[Key business entities found in types, directory names, and variable names]
- [concept]: [one-line definition inferred from usage context]

---
*Auto-generated by /project-init on [DATE]*
```

**Source**: Layer 1 (manifest description) + Layer 3 (domain directory hints) + Layer 4 (paradigm grep) + Layer 5 (domain concepts from sampling).

## architecture.md (~35 lines)

```markdown
# Architecture

## Entry Point
`[path]` → [what it bootstraps]

## Layers
\```
[dir1]/     # [purpose — what belongs here]
[dir2]/     # [purpose]
[dir3]/     # [purpose]
[dir4]/     # [purpose]
\```

## Boundaries
[Which layers can import from which. "Controllers import Services, never the reverse."]

## Data Flow
[Request path from entry to response, if applicable]
[e.g.: "Request → middleware → controller → service → repository → DB"]

## API Type
[REST | GraphQL | gRPC | WebSocket | CLI | Library | None]

---
*Auto-generated by /project-init on [DATE]*
```

**Source**: Hybrid (Layer 3 structure + Layer 4 paradigms + Claude synthesis).

## stack.md (~30 lines)

```markdown
# Stack

**Runtime**: [runtime + version]
**Framework**: [main framework + version]
**Type**: [monorepo | library | CLI | API | SaaS | static-site]

## Critical Dependencies
- [dep1] ([version]) — [one-word purpose]
- [dep2] ([version]) — [purpose]
- [dep3] ([version]) — [purpose]
- [dep4] ([version]) — [purpose]
- [dep5] ([version]) — [purpose]

## Scripts
- `[cmd1]` — [what it does]
- `[cmd2]` — [what it does]
- `[cmd3]` — [what it does]

## Environment
[Only if .env.example exists]
- `[VAR1]` — [purpose]
- `[VAR2]` — [purpose]

---
*Auto-generated by /project-init on [DATE]*
```

**Source**: Mechanical extraction (Layer 1 manifests + Layer 2 configs).

## conventions.md (~40 lines)

```markdown
# Conventions

## Naming
- Files: [convention] (`example`)
- Functions: [convention] (`example`)
- Types/Classes: [convention] (`example`)
- Constants: [convention] (`example`)

## Error Handling
- Pattern: [dominant pattern]
- Philosophy: [throw/return/Result — and why]

## Imports
- Style: [ESM | CJS | mixed]
- Order: [standard lib → third-party → internal]
- Paths: [relative | absolute | aliases]

## Code Style
[Only if explicitly configured — omit if using defaults]
- [key rule 1]
- [key rule 2]

## Testing
[CONDITIONAL — omit entire section if no tests detected]
- Framework: [name]
- Location: [pattern, e.g., `__tests__/` or colocated `*.test.*`]
- Run: `[command]`
- Coverage: `[command]` (if configured)

## Security
[CONDITIONAL — omit if nothing detected]
- Auth: [mechanism]
- Validation: [approach]

---
*Auto-generated by /project-init on [DATE]*
```

**Source**: Pattern extraction (Layer 4 + Layer 5 sampling + Claude synthesis).

## Field Altitude Guide

| Too Low (brittle) | Right Altitude | Too High (vague) |
|---|---|---|
| "Use tabs, 2 spaces" | "Tabs for indentation (configured in .editorconfig)" | "Follow consistent formatting" |
| "Import React from 'react'" | "ESM imports, aliased paths via tsconfig" | "Use standard imports" |
| "Run `npx jest --coverage`" | "`npm test` — Jest with coverage" | "Run the test suite" |

---

*Version: 1.0.0 | Updated: 2026-02-11*
